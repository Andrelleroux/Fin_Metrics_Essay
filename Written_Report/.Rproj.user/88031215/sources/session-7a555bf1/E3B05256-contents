---
output:
  pdf_document:
    latex_engine: xelatex
    number_sections: true
bibliography: Tex/ref.bib
csl: Tex/harvard-stellenbosch-university.csl
header-includes:
  - \usepackage{graphicx}
  - \usepackage{geometry}
  - \geometry{margin=3.5cm}
  - \usepackage{setspace}
  - \setstretch{1.5}
  - \usepackage{float}
  - \usepackage{multicol}
  - \setlength{\columnsep}{1cm}
  - \usepackage{fontspec}
  - \fontsize{12pt}{15pt}\selectfont
  - \setlength{\parskip}{1em}
---
  
\pagenumbering{roman}

\begin{titlepage}
  \centering
  \includegraphics[width=0.4\textwidth]{bin/Stellenbosch\_University\_New\_Logo.png} \par
  \vspace{1cm}
  {\scshape\LARGE A Report on the Viability of a Risk Parity Portfolio in South Africa  \par}
  \vspace{1cm}
  {\LARGE\itshape by 22568948 \par}
  \vspace{1.5cm}
  {\large March 2025 \par}
\end{titlepage}

\clearpage

\tableofcontents

\clearpage

\pagenumbering{arabic}

```{r, echo = FALSE, message=FALSE, warning=FALSE, results='hide'}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)
pacman::p_load(tidyverse, riskParityPortfolio, xts, quadprog, tbl2xts, PerformanceAnalytics,
               RColorBrewer, knitr, kableExtra)

setwd("~/Masters_2024_stuff/Financial_Econometrics/Fin_Metrics_Project/Written_Report")
list.files('code/', full.names = T, recursive = T) %>% .[grepl('.R', .)] %>% as.list() %>% walk(~source(.))
```

```{r, echo=FALSE, results='hide', warning=FALSE, message=FALSE, fig.show='hide'}
Data <- Data_Setup()

LCL_Index_dat <- Data[[2]]
Rebal_Days <- Data[[3]]

Sector_Plots <- Sector_Risk_Parity(data = LCL_Index_dat, rebal = Rebal_Days)
```


# Introduction 



# Data 

The data used for this report is a collection of local indices, to be used as proxies for different assets and sectors, as well as the rebalance dates for the portfolio during the period of interest. The following indices are used.

\begin{itemize}
  \item \textbf{J203}: The JSE All Share Index (ALSI) as a proxy for equities.
  \item \textbf{ALBITR}: A composite bond index as a proxy for money market assets.
  \item \textbf{J311}: An index for the 25 largest industrial equities.
  \item \textbf{J212}: An index for the top 15 financial equities.
  \item \textbf{J310}: An index for the 10 largest resources equities, a proxy for commodities.
  \item \textbf{J253}: An index of companies in the Real Estate sector, a proxy for real estate assets.
  \item \textbf{STeFI}: Index for short-term fixed-interest assets, used as the risk-free rate.
\end{itemize}

This data consists of monthly returns from December 1999 until November 2024. However, some indices only have data starting from a later date, the latest being the start of 2002. For these indices the missing values where randomly drawn from the distribution of returns, based on the valid observations of that index.

# Methodology 

The risk parity approach to portfolio optimisation is done using the methods laid out in this section. This is an alternative method of diversification to something like an equal weighting portfolio, where all assets are allocated to equally in order to achieve diversification. Rather than the focus being on equal weights of assets, the focus shifts to the assets having equal contributions to the total risk of the portfolio.

From Euler’s theorem, the risk of the portfolio \( \sigma(w) \) is given by:

\[
\sigma(w) = \sqrt{w^T \Sigma w}
\]

which can be expanded to:

\[
\sigma(w) = \sum_{i=1}^{N} w_i \frac{\partial \sigma}{\partial w_i} = \sum_{i=1}^{N} w_i \frac{(\Sigma w)_i}{\sqrt{w^T \Sigma w}}.
\]

The risk contribution (RC) from the \( i \)th asset to the standard deviation \( \sigma(w) \) is then defined as:

\[
RC_i = w_i \frac{(\Sigma w)_i}{\sqrt{w^T \Sigma w}}
\]

The risk parity approach includes a constraint into the optimisation process such that the RC's of all assets should be equal to one another.

\[
RC_i = \frac{1}{N} \sigma(w)
\]

This creates a portfolio where assets with lower standard deviations, less risk, receive higher weights. However, all assets still contribute to the final portfolio, as opposed to the popular Maximum Sharpe Ratio approach which tends to prefer high investment into specific asset classes and is more sensitive to small errors in parameter estimation [@qian2016risk]. A Maximum Sharpe Ratio portfolio is also calculated for the same assets across the same time frame in order to be able to make comparisons to the risk parity portfolio and make conclusions. The Maximum Sharpe Ratio portfolio is based of the following functions. The Sharpe ratio is the difference in expected returns of the portfolio and the risk-free rate, divided by the standard deviation of the portfolio. The risk free rate in this report is taken as the rate of the Short-Term Fixed Interest (STeFI) index, which measures the performance of short-term fixed-interest instruments. 

\[
\max_w \quad \frac{E[R_p] - R_f}{\sigma_p}
\]

Where the expected returns (\( E[R_p] \)) and standard deviation (\( \sigma_p \)) is calculated as follows.

\[
\text{where} \quad E[R_p] = w^T \mu, \quad \sigma_p = \sqrt{w^T \Sigma w}
\]

The sum of the weights of the assets must be equal to 1. 

\[
\text{subject to} \quad \sum_{i=1}^{N} w_i = 1
\]

A third approach is used for comparison, the Equal Weighting Portfolio (EWP) is one of the simplest methods of diversification, where all assets are given equal weights in order to get exposure to all asset classes. Comparing a Risk Parity Portfolio, a Maximum Sharpe Ratio Portfolio, and an Equal-Weight Portfolio provides valuable insights into the risk-return trade-offs and diversification benefits of risk parity investing. The Risk Parity Portfolio aims to allocate risk equally across assets, ensuring that no single asset class dominates the portfolio’s overall risk. In contrast, the Maximum Sharpe Ratio Portfolio seeks to optimize the trade-off between expected return and risk, prioritizing assets that offer the highest risk-adjusted returns, which may lead to concentrated allocations in high-return, low-volatility assets. The Equal-Weight Portfolio, which assigns identical weights to all assets, serves as a baseline for comparison, offering simplicity and diversification without considering volatility or return expectations. By analysing these three approaches, one can assess whether risk parity delivers superior diversification benefits, how it compares in terms of return efficiency relative to the Maximum Sharpe portfolio, and whether its risk allocation provides advantages over a simple equal weighting approach. This comparison helps in understanding the validity of risk parity in achieving stable, well-balanced portfolio performance in the South African market.

# Results

```{r}
plot_1 <- Sector_Plots[[1]]
plot_1
```




# Conclusion

\newpage

# References

